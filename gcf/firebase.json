//
// For more information on setting up and running this sample code, see
// https://developers.google.com/firebase/docs/cloud-functions/writing-functions
//

{
  "firebase": "<APP_ID>",
  "public": "./",
  "ignore": [
    "firebase.json",
    "**/.*",
    "**/node_modules/**",
    "functions"
  ],
  // [START trigger_rules]
  "rules": "security-rules.json", // Must be present as online rules will be overridden
  "functions": {
    ".source": "functions", // Directory must contain an index.js
    "makeuppercase": { // Must match a module export in your index.js
      "triggers": {
        "database": {
          "path": "/messages/$message", // Path of database objects that trigger the function
          "condition": "!data.exists()" // Only run once on new messages only
        }
      }
    }
  }
  // [END trigger_rules]
}
